<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.knockknock.mapper.MeetingAndEventMapper">

    <select id="meetingCount" resultType="int">
        SELECT
            COUNT(*)
        FROM MEETING
    </select>
    <select id="meetingList" resultType="MeetingVDTO">
    	<![CDATA[
			SELECT
			    MT.WRITING_NUMBER writingNumber, MT.TITLE, MT.WRITE_TIME writeTime, MT.HIT, MB.NICKNAME
			FROM
			    MEETING MT, MEMBER MB
			WHERE WRITING_NUMBER > 0 AND MT.MEMBER_NUMBER = MB.MEMBER_NUMBER
			ORDER BY WRITING_NUMBER DESC, WRITE_TIME DESC
			LIMIT #{pageStart}, #{amount}
    	]]>
    </select>
    <select id="meetingView" resultType="MeetingVDTO" parameterType="int">
        SELECT
            MT.WRITING_NUMBER writingNumber, MT.TITLE, MT.HIT, MT.IMAGE, MT.PLACE, 
            MT.PLACE_DETAIL placeDetail, MT.WRITE_TIME writeTime,
            MT.ACCEPT_START_TIME acceptStartTime, MT.ACCEPT_END_TIME acceptEndTime,
            MT.MEETING_START_TIME meetingStartTime, MT.MEETING_END_TIME meetingEndTime,
            MT.RECRUIT_NUMBER recruitNumber, MT.SIMPLE_INTRODUCE simpleIntroduce,
            MT.DETAIL_INTRODUCE detailIntroduce, MB.NICKNAME
        FROM MEETING MT, MEMBER MB
        WHERE MT.MEMBER_NUMBER=MB.MEMBER_NUMBER AND WRITING_NUMBER = #{writingNumber}
    </select>
    <delete id="meetingDelete" parameterType="int">
    	DELETE FROM MEETING WHERE WRITING_NUMBER = #{writingNumber}
    </delete>

</mapper>