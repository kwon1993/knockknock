<!DOCTYPE HTML>
<html xmlns:layout="http://www.w3.org/1999/xhtml" 
layout:decorate="~{etc/fragments/Main_layout}">
<head>
    <title>낙낙-카테고리 방찾기</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">    
</head>
<body>

	<div layout:fragment="content" class="container">
		<div class="w3-container">
			<div class="jumbotron" id="jumbotronId" style="margin-top: 40px;">
				<!-- 주소 검색 -->
				<div>
					<form action="/categoryRoomSearch">
						<label class="field-title"><strong>주소검색</strong></label>
						<input type="text" name="address" />
						<button type="submit" name="categoryRoomSearch"
							id="categoryRoomSearch">주소 검색</button>
					</form>
					<!-- 체크박스 -->
						<div class="branchThemeField">
							<label class="field-title"><strong>관심사</strong></label>
							<div  th:each="theme : ${themeLists}" name="branchTheme" id="branchTheme">
									<div class="checkbox"><input type="checkbox" th:value="${theme}" th:id="${theme}" th:name="branchTheme"><label  th:text="${theme}" th:for="${theme}"></label></div>
							</div>
						</div>
						
				</div>

			</div>
		</div>

		<table class="w3-table-all">
			<tr>
				<td>방번호</td>
				<td>위치</td>
				<td>방 이름</td>
				<td>관심사</td>
				<td>방 타입</td>
				<td>보증금</td>
				<td>월세</td>
				<td>입주가능일</td>
				<td>임주가능 인원</td>
			</tr>
			<tr th:each="branchDetailVDTO : ${lists}">
				<td th:text="${branchDetailVDTO.roomNumber}"></td>
				<td th:text="${branchDetailVDTO.address}"></td>
				<!-- 		<td> -->
				<!--             <a th:href="@{'adminEventView?writingNumber=' + ${branchDetailVDTO.writingNumber}}"><p th:text="${branchDetailVDTO.title}"></p></a> -->
				<!--         </td> -->
				<td th:text="${branchDetailVDTO.addressDetail}"></td>
				<td th:text="${branchDetailVDTO.theme}"></td>
				<td th:text="${branchDetailVDTO.gender}"></td>
				<td th:text="${branchDetailVDTO.deposit}"></td>
				<td th:text="${branchDetailVDTO.monthlyRent}"></td>
				<td th:text="${branchDetailVDTO.rentableDate}"></td>
				<td th:text="${branchDetailVDTO.allowNumber}"></td>
			</tr>

			<!--     <tr> -->
			<!--         <td colspan="5"> -->
			<!--             <form action="adminEventWriteView"> -->
			<!--                 <input type="submit" value="Write"> -->
			<!--             </form> -->
			<!--         </td> -->
			<!--     </tr> -->
		</table>
		
	

  
<script>
$(document).ready(function(){
	$('.checkbox').on('click',function(){
		var themeCheckboxList = new Array();
		$("input[name='branchTheme']:checked").each(function(i){
			themeCheckboxList.push($(this).val());
		});//checked end
		jQuery.ajax({
			method : 'post',
			url : '/categoryRoomSearch',
			data : JSON.stringify({themeCheckboxList}),
			dataType : "json",
			contentType: 'application/json; charset=UTF-8',
			//async : false,
			success : function(){
			
				alert("gffhfh");
			},
			error : function(data){
				alert("category  error");
			}
			
		});
	 }); 
	
	
 /*  $("input[type='checkbox']").on('click',function(){
	 alert(this.value);
  }); */
  
});

 /* function Categorycheckbox(){
	
	var userId = $("#category").val();

	 name이 같은 체크박스의 값들을 배열에 담는다.
 	var checkboxValues = [];
 	$("input[name='hobby']:checked").each(function(i) {
 		checkboxValues.push($(this).val());
 	});
	
	// 사용자 ID(문자열)와 체크박스 값들(배열)을 name/value 형태로 담는다.
	var allData = { "category": category};
	
	$.ajax({
 		url:"",
		type:'post',
		data: allData,
		success:function(data){
			alert("완료!");
			window.opener.location.reload();
			self.close();
		},
		error:function(jqXHR, textStatus, errorThrown){
			alert("에러 발생~~ \n" + textStatus + " : " + errorThrown);
			self.close();
		}
	});
} */
</script>
</div>
</body>
</html>

